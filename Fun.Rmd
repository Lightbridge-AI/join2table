---
title: "Function"
output: html_notebook
---

```{r}
library(tidyverse)
library(rlang)
library(lobstr)
```

# Table_join

`*_join`

argument `by = c("Name.x" = "Name.y")` is named length 1 chr vector
where `Name.x` is name of `"Name.y"`

```{r}
lobstr::ast(by <- c("Name" = "user_full_name"))
```


```{r}
table_join <- function(fun, df.lt, df.rt, key.lt = NULL , key.rt = NULL,  ...){
  
 fun  <- switch (fun,
    "semi_join" = semi_join,
    "anti_join" = anti_join,
    "inner_join" = inner_join,
    "left_join" = left_join,
    "right_join" = right_join,
    "full_join" =full_join,
    stop("This function is not supported", call. = F)
    )

  names(key.rt) <- key.lt 
  
  call2(fun, df.lt, df.rt, key.rt) %>% eval()

}

table_join("left_join", band_members, band_instruments2, 
             key.lt = "name", key.rt = "artist")
```
```{r}
table_join("anti_join", ids, elect, key.lt = "Name", key.rt = "user_full_name")
```
```{r}
table_join("left_join", band_members, band_instruments)
```



```{r}
by <-  c("Name" = "user_full_name")
by
c("Name" = "user_full_name") %>% names()
```

```{r}
table_join("left_join", ids, elect, by = c("Name" = "user_full_name"))
```

```{r}
table_join("left_join", band_instruments, band_members, by = c("df"))
```


# Swab

```{r}
swab <- function(x,y) {
  a <- x
  b <- y
  
  y <<- a
  x <<- b
}
```

```{r}
x <- c(1:10)
y <- c(letters[1:10])

swab(x,y)
```

```{r}
x
```

```{r}
iris %>% map_df(as.character)
```

